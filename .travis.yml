sudo: false
language: cpp
os:
  - osx


matrix:
  allow_failures:
    - os: osx

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install boost; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install openssl; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install rapidjson; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install qt; fi

#   - set -e
#   - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then unset -f cd; fi
#   - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then shell_session_update() { :; }; fi
#   - git clone --depth 1 https://github.com/nim-lang/csources.git
#   - cd csources
#   - sh build.sh
#   - cd ..
#   - export PATH=$(pwd)/bin${PATH:+:$PATH}

before_script:
  - export PATH="/usr/local/opt/qt/bin:$PATH"
  - export LDFLAGS="-L/usr/local/opt/qt/lib"
  - export CPPFLAGS="-I/usr/local/opt/qt/include"
  - export PKG_CONFIG_PATH="/usr/local/opt/qt/lib/pkgconfig"

script:
  - mkdir build
  - cd build
  - qmake ..
  - make
